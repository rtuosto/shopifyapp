# App (local dev)
# Use a tunnel URL (ngrok, cloudflare, or `shopify app dev` tunnel) so Shopify can send webhooks and OAuth callbacks.
# Example: https://abc123.ngrok-free.app  (no trailing slash)
APP_URL=http://localhost:3000
SESSION_SECRET=dev-session-secret-min-32-characters-long
NODE_ENV=development

# Shopify – from Partner Dashboard → Apps → Shoptimizer → Client credentials
# API key is the "Client ID"; copy Client secret as SHOPIFY_API_SECRET
SHOPIFY_API_KEY=
SHOPIFY_API_SECRET=

# Optional: for local dev without OAuth. Create a custom app in your dev store (Settings → Apps and sales channels → Develop apps → Create an app) and copy its Admin API access token. Lets you sync products and generate ideas without opening the app from Shopify Admin.
# SHOPIFY_DEV_ACCESS_TOKEN=shpat_...
# SHOPIFY_DEV_STORE=your-dev-store.myshopify.com

# Database – use one of:
# • Neon (dev): New project at neon.tech → Connection details → copy URI (use a separate project for dev vs prod)
# • Local: Install Postgres, create DB, then e.g. postgresql://postgres:postgres@localhost:5432/shoptimizer_dev
DATABASE_URL=postgresql://user:password@host/dbname?sslmode=require

# OpenAI – for AI recommendations (optional; app starts without it)
OPENAI_API_KEY=sk-...

# Only if your dev store is password-protected (e.g. "saotsu"); omit otherwise
# SHOPIFY_STORE_PASSWORD=

# --- Production (e.g. Railway) ---
# Set these in your host's dashboard; NODE_ENV and PORT are usually set automatically.
# Required: APP_URL (public app URL), SESSION_SECRET, DATABASE_URL, SHOPIFY_API_KEY, SHOPIFY_API_SECRET
# Optional: OPENAI_API_KEY.
#
# Railway 502 fix: In Service → Settings → Networking (or Domains), set the domain's
# "Target port" to 8080 (or leave unset so it uses PORT). The app listens on PORT (8080).
